<!DOCTYPE html>
<html lang="zh-cn">
  <head>
    <meta charset="utf-8">
    <meta content="IE=edge" http-equiv="X-UA-Compatible">
    <meta content="width=device-width, initial-scale=1.0" name="viewport">
    <meta content="Easemob - 简洁、直观、强悍、移动设备优先的前端开发框架，让Mobile开发更迅速、简单。" name="description">
    <meta content="Easemob" name="author">
    <title>Working with queries | Easemob</title>
    <link href="http://cdn.bootcss.com/twitter-bootstrap/3.0.3/css/bootstrap.min.css" rel="stylesheet">
    <link href="/assets/css/docs.css" rel="stylesheet">
    <link href="http://cdn.bootcss.com/highlight.js/7.3/styles/github.min.css" rel="stylesheet">
    <style type="text/css">
      body{font-family:"ff-tisa-web-pro-1","ff-tisa-web-pro-2","Lucida Grande","Helvetica Neue",Helvetica,Arial,"Hiragino Sans GB","Hiragino Sans GB W3","WenQuanYi Micro Hei",sans-serif;}
      h1, .h1, h2, .h2, h3, .h3, h4, .h4, .lead {font-family:"ff-tisa-web-pro-1","ff-tisa-web-pro-2","Lucida Grande","Helvetica Neue",Helvetica,Arial,"Hiragino Sans GB","Hiragino Sans GB W3","Microsoft YaHei UI","Microsoft YaHei","WenQuanYi Micro Hei",sans-serif;}
      pre code { background: transparent; }
      @media (min-width: 768px) {
          .bs-docs-home .bs-social,
          .bs-docs-home .bs-masthead-links {
            margin-left: 0;
          }
      }
    </style>
    <!--[if lt IE 9]
    script  type='text/javascript' src=("/assets/js/ie8-responsive-file-warning.js" ) 
    script  type='text/javascript' src=("http://cdn.bootcss.com/html5shiv/3.7.0/html5shiv.min.js" ) 
    script  type='text/javascript' src=("http://cdn.bootcss.com/respond.js/1.3.0/respond.min.js" ) -->
    <link href="/assets/ico/apple-touch-icon-144-precomposed.png" rel="apple-touch-icon-precomposed" sizes="144x144">
    <link href="/assets/ico/favicon.ico" rel="shortcut icon">
  </head>
  <body><a class="sr-only" href="#content"> Skip to main content</a>
<header class="navbar navbar-inverse navbar-fixed-top bs-docs-nav" role="banner">
  <div class="container">
    <div class="navbar-header">
      <button class="navbar-toggle" data-target=".bs-navbar-collapse" data-toggle="collapse" type="button"><span class="sr-only">Toggle navigation</span><span class="icon-bar"></span><span class="icon-bar"></span><span class="icon-bar"></span></button><a class="navbar-brand" href=""> Easemob</a>
    </div>
    <nav class="collapse navbar-collapse bs-navbar-collapse" role="navigation">
      <ul class="nav navbar-nav">
        <li class="active">
          <a href=""> 首页</a>
        </li>
        <li>
          <a href="/quickstart/"> 入门</a>
        </li>
        <li>
          <a href="/docs/"> 文档</a>
        </li>
        <li>
          <a href="/download/"> SDK下载</a>
        </li>
        <li>
          <a href="/forum/"> 开发者论坛</a>
        </li>
        <li>
          <a href="/blog/"> 博客          </a>
        </li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
          <a href="/signin/"> 登陆</a>
        </li>
        <li>
          <a href="/signup/"> 注册</a>
        </li>
      </ul>
    </nav>
  </div>
</header><div id="content" class="bs-header">
  <div class="container">
    <h1>
      Working with queries
    </h1>
    <p>
      Easemob
    </p>
  </div>
</div>
<div class="container bs-docs-container">
  <div class="row">
    <div class="col-md-3">
      <div class="bs-sidebar hidden-print" role="complementary">
        <ul class="nav bs-sidenav">
          <li>
            <a href="#download"> 下载Bootstrap</a>
            <ul class="nav">
              <li>
                <a href="#download-compiled"> 编译后的CSS、JS和字体文件</a>
              </li>
              <li>
                <a href="#download-additional"> 额外的下载渠道</a>
              </li>
              <li>
                <a href="#download-cdn"> Bootstrap CDN</a>
              </li>
            </ul>
          </li>
          <li>
            <a href="#whats-included"> 包含了哪些文件</a>
            <ul class="nav">
              <li>
                <a href="#whats-included-precompiled"> 编译版</a>
              </li>
              <li>
                <a href="#whats-included-source"> 源码</a>
              </li>
            </ul>
          </li>
          <li>
            <a href="#template"> 基本模版</a>
          </li>
          <li>
            <a href="#examples"> 案例</a>
          </li>
          <li>
            <a href="#disable-responsive"> 禁用响应式布局</a>
          </li>
          <li>
            <a href="#migration"> 从2.x升级到3.0版本</a>
            <ul class="nav">
              <li>
                <a href="#migration-classes"> 被修改的主要class</a>
              </li>
              <li>
                <a href="#migration-new"> 新增class</a>
              </li>
              <li>
                <a href="#migration-dropped"> 被移除的class</a>
              </li>
              <li>
                <a href="#migration-notes"> 额外注意</a>
              </li>
            </ul>
          </li>
          <li>
            <a href="#browsers"> 浏览器支持</a>
          </li>
          <li>
            <a href="#third-parties"> 对第三方组件的支持</a>
          </li>
          <li>
            <a href="#accessibility"> 可访问性</a>
          </li>
          <li>
            <a href="#license-faqs"> 许可证FAQ</a>
          </li>
          <li>
            <a href="#customizing"> 定制Bootstrap</a>
          </li>
        </ul>
      </div>
    </div>
    <div class="col-md-9" role="main">
<h1 id="working-with-queries">Working with queries</h1>

<p>When querying your Apache Usergrid data, you can use your query string to
get the data, then sort and manage it on the client. This topic
describes a few useful techniques.</p>

<blockquote>
  <p><strong>Note</strong>: For introductory information about queries, be sure to see
<a href="/app-services-data-query-overview">Apache Usergrid data query overview</a>.</p>
</blockquote>

<blockquote>
  <p><strong>Note:</strong>Query examples in this content are shown unencoded to make
them easier to read. Keep in mind that you might need to encode query
strings if you're sending them as part of URLs, such as when you're
executing them with the cURL tool.</p>
</blockquote>

<h2 id="retrieving-values-for-multiple-properties">Retrieving values for multiple properties</h2>

<p>Your query can return multiple kinds of values – such as the values of
multiple properties – by specifying the property names in your select
statement as a comma-separated list.</p>

<p>For example, the following request returns the address and phone number
of users whose name is Gladys Kravitz:</p>

<pre><code>/users?ql=select address,phone_number where name = 'Gladys Kravitz'
</code></pre>

<h2 id="querying-for-the-contents-of-text">Querying for the contents of text</h2>

<p>Your query can search the text of entity values of the string data type.
For example, you can search a postal code field for values that start
with a specific three numbers.</p>

<p>For example, the following query selects all restaurants with the word
<code>diner</code> in the name:</p>

<pre><code>/restaurants?ql=select * where name contains 'diner'
</code></pre>

<blockquote>
  <p><strong>Note:</strong> Not all string properties of the default entities are
indexed for searching. This includes the <code>User</code> entity's <code>username</code>
property.</p>
</blockquote>

<p>The following table lists a few examples of the kind of searches you can
do in queries.</p>

<p>+————————-+————————-+————————-+
| Goal                    | Example                 | Notes                   |
+=========================+=========================+=========================+
| Find users whose name   |     /users?ql=select *  | <code>contains</code>looks for the |
| value contains the full | where name contains 'Kr | occurrence of a full    |
| word "Kravitz".         | avitz'                  | word anywhere in the    |
|                         |                         | searched property.      |
+————————-+————————-+————————-+
| Find users whose name   |     /users?ql=select *  | <code>contains</code>will look for |
| value contains a word   | where name contains 'Kr | partial words if you    |
| that starts with        | av*'                    | include a wildcard.     |
| "Krav".                 |                         |                         |
+————————-+————————-+————————-+
| Find users whose name   |     /users?ql=select *  | The <code>=</code> operator is     |
| value is exactly and    | where name = 'Gladys Kr | looking for a match in  |
| only "Gladys Kravitz".  | avitz'                  | the entire searched     |
|                         |                         | property value. Use a   |
|                         |                         | <code>*</code> wildcard to look    |
|                         |                         | for some set of the     |
|                         |                         | first characters only.  |
+————————-+————————-+————————-+
| Find stores whose       |     /stores?ql=location | <code>within</code>will test for   |
| locations are within    | .coordinates within .5  | values within the value |
| the specified longitude | of 40.042016, -86.90074 | you specify. The        |
| and latitude.           | 9                       | <code>within</code> value is       |
|                         |                         | expressed as a number   |
|                         |                         | of meters.              |
|                         |                         |                         |
|                         |                         | The return results are  |
|                         |                         | sorted in order of      |
|                         |                         | nearest to furthest. If |
|                         |                         | there are multiple      |
|                         |                         | entries at the same     |
|                         |                         | location, they're       |
|                         |                         | returned in the order   |
|                         |                         | they were added to the  |
|                         |                         | database.               |
+————————-+————————-+————————-+</p>

<h2 id="sorting-results">Sorting results</h2>

<p>You can return query results that are sorted in the order you specify.
Use the <code>order by</code> clause to specify the property to sort by, along with
the order in which results should be sorted. The syntax for the clause
is as follows:</p>

<pre><code>order by &lt;property_name&gt; asc | desc
</code></pre>

<p>The following table includes a few examples:</p>

<p>+————————————–+————————————–+
| Goal                                 | Example                              |
+======================================+======================================+
| Sort by first name in ascending      |     /users?ql=select * where lastnam |
| order                                | e = 'Smith' order by firstname asc   |
+————————————–+————————————–+
| Sort by first name in descending     |     /users?ql=select * where lastnam |
| order                                | e = 'Smith' order by firstname desc  |
+————————————–+————————————–+
| Sort by last name, then first name   |     /users?ql=select * where lastnam |
| in ascending order                   | e contains 'Sm*' order by lastname a |
|                                      | sc, firstname asc                    |
+————————————–+————————————–+</p>

<h2 id="managing-large-sets-of-results">Managing large sets of results</h2>

<p>When your query might return more results than you want to display to
the user at once, you can use the limit parameter with cursors or API
methods to manage the display of results. By default, query results are
limited to 10 at a time. You can adjust this by setting the limit
parameter to a value you prefer.</p>

<p>For example, you might execute a query that could potentially return
hundreds of results, but you want to display 20 of those at a time to
users. To do this, your code sets the limit parameter to 20 when
querying for data, then provides a way for the user to request more of
the results when they're ready.</p>

<p>You would use the following parameters in your query:</p>

<p>+————————-+————————-+————————-+
| Parameter               | Type                    | Description             |
+=========================+=========================+=========================+
| <code>limit</code>                 | integer                 | Number of results to    |
|                         |                         | return. The maximum     |
|                         |                         | number of results is    |
|                         |                         | 1,000. Specifying a     |
|                         |                         | limit greater than      |
|                         |                         | 1,000 will result in a  |
|                         |                         | limit of 1,000.         |
|                         |                         |                         |
|                         |                         | Limit is applied to the |
|                         |                         | collection, not the     |
|                         |                         | query string. For       |
|                         |                         | example, the following  |
|                         |                         | query will find the     |
|                         |                         | first 100 entities in   |
|                         |                         | the books collection,   |
|                         |                         | then from that set      |
|                         |                         | return the ones with    |
|                         |                         | author='Hemingway':     |
|                         |                         |                         |
|                         |                         |     /books?ql=author =  |
|                         |                         | 'Hemingway'&amp;limit=100   |
|                         |                         |                         |
|                         |                         | You can also use the    |
|                         |                         | limit parameter on a    |
|                         |                         | request without a query |
|                         |                         | string. The following   |
|                         |                         | example is shorthand    |
|                         |                         | for selecting all books |
|                         |                         | and limiting by 100 at  |
|                         |                         | a time:                 |
|                         |                         |                         |
|                         |                         |     /books?limit=100    |
|                         |                         |                         |
|                         |                         | Using a limit on a      |
|                         |                         | DELETE can help you     |
|                         |                         | manage the amount of    |
|                         |                         | time it takes to delete |
|                         |                         | data. For example you   |
|                         |                         | can delete all of the   |
|                         |                         | books, 1000 at a time,  |
|                         |                         | with the following:     |
|                         |                         |                         |
|                         |                         |     DELETE /books?limit |
|                         |                         | =1000                   |
|                         |                         |                         |
|                         |                         | Keep in mind that       |
|                         |                         | DELETE operations can   |
|                         |                         | take longer to execute. |
|                         |                         | Yet even though the     |
|                         |                         | DELETE query call might |
|                         |                         | time out (such as with  |
|                         |                         | a very large limit),    |
|                         |                         | the operation will      |
|                         |                         | continue on the server  |
|                         |                         | even if the client      |
|                         |                         | stops waiting for the   |
|                         |                         | result.                 |
+————————-+————————-+————————-+
| <code>cursor</code>                | string                  | An encoded              |
|                         |                         | representation of the   |
|                         |                         | query position pointing |
|                         |                         | to a set of results. To |
|                         |                         | retrieve the next set   |
|                         |                         | of results, pass the    |
|                         |                         | cursor with your next   |
|                         |                         | call for most results.  |
+————————-+————————-+————————-+</p>

<p>For example:</p>

<p>Select all users whose name starts with fred, and returns the first 50
results:</p>

<pre><code>/users?ql=select * where name = 'fred*'&amp;limit=50
</code></pre>

<p>Retrieve the next batch of users whose name is "fred", passing the
cursor received from the last request to specify where the next set of
results should begin:</p>

<pre><code>/users?ql=select * where name = 'fred*'&amp;limit=50&amp;cursor=LTIxNDg0NDUxNDpnR2tBQVFFQWdITUFDWFJ2YlM1emJXbDBhQUNBZFFBUUQyMVZneExfRWVLRlV3TG9Hc1doZXdDQWRRQVFIYVdjb0JwREVlS1VCd0xvR3NWT0JRQQ
</code></pre>

    </div>
  </div>
</div><footer class="bs-footer" role="contentinfo">
      <div class="container">
        <p class="text-muted">
          做中国最好的BaaS
        </p>
      </div>
    </footer>
    <script src="http://cdn.bootcss.com/jquery/1.10.2/jquery.min.js"></script>
    <script src="http://cdn.bootcss.com/twitter-bootstrap/3.0.3/js/bootstrap.min.js"></script>
    <script src="http://cdn.bootcss.com/holder/2.0/holder.min.js"></script>
    <script src="http://cdn.bootcss.com/highlight.js/7.3/highlight.min.js"></script>
    <script type="text/javascript">
      hljs.initHighlightingOnLoad();
    </script>
    <script src="/assets/js/application.js"></script>
  </body>
</html>
<!DOCTYPE html>
<html lang="zh-cn">
  <head>
    <meta charset="utf-8">
    <meta content="IE=edge" http-equiv="X-UA-Compatible">
    <meta content="width=device-width, initial-scale=1.0" name="viewport">
    <meta content="Easemob - 简洁、直观、强悍、移动设备优先的前端开发框架，让Mobile开发更迅速、简单。" name="description">
    <meta content="Easemob" name="author">
    <title>Retrieving Collections | Easemob</title>
    <link href="http://cdn.bootcss.com/twitter-bootstrap/3.0.3/css/bootstrap.min.css" rel="stylesheet">
    <link href="/docs-assets/css/docs.css" rel="stylesheet">
    <link href="http://cdn.bootcss.com/highlight.js/7.3/styles/github.min.css" rel="stylesheet">
    <style type="text/css">
      body{font-family:"ff-tisa-web-pro-1","ff-tisa-web-pro-2","Lucida Grande","Helvetica Neue",Helvetica,Arial,"Hiragino Sans GB","Hiragino Sans GB W3","WenQuanYi Micro Hei",sans-serif;}
      h1, .h1, h2, .h2, h3, .h3, h4, .h4, .lead {font-family:"ff-tisa-web-pro-1","ff-tisa-web-pro-2","Lucida Grande","Helvetica Neue",Helvetica,Arial,"Hiragino Sans GB","Hiragino Sans GB W3","Microsoft YaHei UI","Microsoft YaHei","WenQuanYi Micro Hei",sans-serif;}
      pre code { background: transparent; }
      @media (min-width: 768px) {
          .bs-docs-home .bs-social,
          .bs-docs-home .bs-masthead-links {
            margin-left: 0;
          }
      }
    </style>
    <!--[if lt IE 9]
    script  type='text/javascript' src=("/docs-assets/js/ie8-responsive-file-warning.js" ) 
    script  type='text/javascript' src=("http://cdn.bootcss.com/html5shiv/3.7.0/html5shiv.min.js" ) 
    script  type='text/javascript' src=("http://cdn.bootcss.com/respond.js/1.3.0/respond.min.js" ) -->
    <link href="/docs-assets/ico/apple-touch-icon-144-precomposed.png" rel="apple-touch-icon-precomposed" sizes="144x144">
    <link href="/docs-assets/ico/favicon.png" rel="shortcut icon">
  </head>
  <body><a class="sr-only" href="#content"> Skip to main content</a>
<header class="navbar navbar-inverse navbar-fixed-top bs-docs-nav" role="banner">
  <div class="container">
    <div class="navbar-header">
      <button class="navbar-toggle" data-target=".bs-navbar-collapse" data-toggle="collapse" type="button"><span class="sr-only">Toggle navigation</span><span class="icon-bar"></span><span class="icon-bar"></span><span class="icon-bar"></span></button><a class="navbar-brand" href=""> Easemob</a>
    </div>
    <nav class="collapse navbar-collapse bs-navbar-collapse" role="navigation">
      <ul class="nav navbar-nav">
        <li class="active">
          <a href=""> 首页</a>
        </li>
        <li>
          <a href="/quickstart/"> 入门</a>
        </li>
        <li>
          <a href="/docs/"> 文档</a>
        </li>
        <li>
          <a href="/download/"> SDK下载</a>
        </li>
        <li>
          <a href="/forum/"> 开发者论坛</a>
        </li>
        <li>
          <a href="/blog/"> 博客          </a>
        </li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
          <a href="/signin/"> 登陆</a>
        </li>
        <li>
          <a href="/signup/"> 注册</a>
        </li>
      </ul>
    </nav>
  </div>
</header><div id="content" class="bs-header">
  <div class="container">
    <h1>
      Retrieving Collections
    </h1>
    <p>
      简要介绍Bootstrap，以及如何下载、使用，基本模版和案例，等等。
    </p>
  </div>
</div>
<div class="container bs-docs-container">
  <div class="row">
    <div class="col-md-3">
      <div class="bs-sidebar hidden-print" role="complementary">
        <ul class="nav bs-sidenav">
          <li>
            <a href="#download"> 下载Bootstrap</a>
            <ul class="nav">
              <li>
                <a href="#download-compiled"> 编译后的CSS、JS和字体文件</a>
              </li>
              <li>
                <a href="#download-additional"> 额外的下载渠道</a>
              </li>
              <li>
                <a href="#download-cdn"> Bootstrap CDN</a>
              </li>
            </ul>
          </li>
          <li>
            <a href="#whats-included"> 包含了哪些文件</a>
            <ul class="nav">
              <li>
                <a href="#whats-included-precompiled"> 编译版</a>
              </li>
              <li>
                <a href="#whats-included-source"> 源码</a>
              </li>
            </ul>
          </li>
          <li>
            <a href="#template"> 基本模版</a>
          </li>
          <li>
            <a href="#examples"> 案例</a>
          </li>
          <li>
            <a href="#disable-responsive"> 禁用响应式布局</a>
          </li>
          <li>
            <a href="#migration"> 从2.x升级到3.0版本</a>
            <ul class="nav">
              <li>
                <a href="#migration-classes"> 被修改的主要class</a>
              </li>
              <li>
                <a href="#migration-new"> 新增class</a>
              </li>
              <li>
                <a href="#migration-dropped"> 被移除的class</a>
              </li>
              <li>
                <a href="#migration-notes"> 额外注意</a>
              </li>
            </ul>
          </li>
          <li>
            <a href="#browsers"> 浏览器支持</a>
          </li>
          <li>
            <a href="#third-parties"> 对第三方组件的支持</a>
          </li>
          <li>
            <a href="#accessibility"> 可访问性</a>
          </li>
          <li>
            <a href="#license-faqs"> 许可证FAQ</a>
          </li>
          <li>
            <a href="#customizing"> 定制Bootstrap</a>
          </li>
        </ul>
      </div>
    </div>
    <div class="col-md-9" role="main">
<h1 id="retrieving-collections">Retrieving Collections</h1>

<p>This article describes how to retrieve all of the entities in a
collection.</p>

<p>By default, the Apache Usergrid API returns 10 entities per request. For
collections with more than 10 entities, use the returned 'cursor'
property to retrieve the next 10 entities in the result set. You may
also use the <code>LIMIT</code> parameter in a query string to increase the number
of results returned. For more information on using cursors, see
<a href="/working-queries#cursor">Managing large sets of results</a>.</p>

<p><strong>Note:</strong> Although not shown in the API examples below, you need to
provide a valid access token with each API call. See <a href="/authenticating-users-and-application-clients">Authenticating
users and application
clients</a> for details.</p>

<h2 id="retrieving-sets-of-entities-from-a-collection">Retrieving sets of entities from a collection</h2>

<ul>
  <li><a href="#curl_get_collection">cURL</a></li>
  <li><a href="#ios_get_collection">iOS</a></li>
  <li><a href="#android_get_collection">Android</a></li>
  <li><a href="#javascript_get_collection">JavaScript (HTML5)</a></li>
  <li><a href="#ruby_get_collection">Ruby</a></li>
  <li><a href="#nodejs_get_collection">Node.js</a></li>
</ul>

<h3 id="example-requestresponse">Example Request/Response</h3>

<h4 id="request">Request:</h4>

<pre><code>curl -X GET "https://api.usergrid.com/your-org/your-app/items"
</code></pre>

<h4 id="response">Response:</h4>

<pre><code>{
      "action" : "get",
      "application" : "f34f4222-a166-11e2-a7f7-02e81adcf3d0",
      "params" : { },
      "path" : "/items",
      "uri" : "http://api.usergrid.com/your-org/your-app/items",
      "entities" : [ {
            "uuid" : "5bb76bca-1657-11e3-903f-9ff6c621a7a4",
            "type" : "item",
            "name" : "milk",
            "created" : 1378405020796,
            "modified" : 1378405020796,
            "metadata" : {
                  "path" : "/items/5bb76bca-1657-11e3-903f-9ff6c621a7a4"
            },
            "name" : "milk",
            "price" : "3.25"
      }, {
        "uuid" : "1a9356ba-1682-11e3-a72a-81581bbaf055",
        "type" : "item",
        "name" : "bread",
        "created" : 1378423379867,
        "modified" : 1378423379867,
        "metadata" : {
              "path" : "/items/1a9356ba-1682-11e3-a72a-81581bbaf055"
        },
        "name" : "bread",
        "price" : "2.50"
      } ],
      "timestamp" : 1378426821261,
      "duration" : 35,
      "organization" : "your-org",
      "applicationName" : "your-app",
      "count" : 2
}
</code></pre>

<h3 id="request-syntax">Request Syntax</h3>

<pre><code>curl -X GET https://api.usergrid.com/&lt;org&gt;/&lt;app&gt;/&lt;collection&gt;
</code></pre>

<h3 id="parameters">Parameters</h3>

<p>Parameter    Description
  ———— —————————————-
  org          Organization UUID or organization name
  app          Application UUID or application name
  collection   Collection UUID or collection name</p>

<p>This example uses the <a href="/app-services-sdks#ios">Apache Usergrid iOS SDK</a>.</p>

<h3 id="example-requestresponse-1">Example Request/Response</h3>

<h4 id="request-1">Request:</h4>

<pre><code>-(NSString*)getCollection {

    //specify the entity type that corresponds to the collection to be retrieved
    NSString *type = @"item";
    
    //we recommend you call ApigeeClient from your AppDelegate. 
    //for more information see the iOS SDK install guide: http://apigee.com/docs/app-services/content/installing-apigee-sdk-ios

    //create an instance of AppDelegate
    AppDelegate *appDelegate = (AppDelegate *)[[UIApplication sharedApplication] delegate];
    
    ApigeeCollection *collection = [[ApigeeCollection alloc] init:apigeeClient.dataClient type:type];
    
    @try {
        //success
    }
    @catch (NSException * e) {
        //fail
    }

}
</code></pre>

<h4 id="response-1">Response:</h4>

<pre><code>{
      "action" : "get",
      "application" : "f34f4222-a166-11e2-a7f7-02e81adcf3d0",
      "params" : { },
      "path" : "/items",
      "uri" : "http://api.usergrid.com/your-org/your-app/items",
      "entities" : [ {
            "uuid" : "5bb76bca-1657-11e3-903f-9ff6c621a7a4",
            "type" : "item",
            "name" : "milk",
            "created" : 1378405020796,
            "modified" : 1378405020796,
            "metadata" : {
                  "path" : "/items/5bb76bca-1657-11e3-903f-9ff6c621a7a4"
            },
            "name" : "milk",
            "price" : "3.25"
      }, {
        "uuid" : "1a9356ba-1682-11e3-a72a-81581bbaf055",
        "type" : "item",
        "name" : "bread",
        "created" : 1378423379867,
        "modified" : 1378423379867,
        "metadata" : {
              "path" : "/items/1a9356ba-1682-11e3-a72a-81581bbaf055"
        },
        "name" : "bread",
        "price" : "2.50"
      } ],
      "timestamp" : 1378426821261,
      "duration" : 35,
      "organization" : "your-org",
      "applicationName" : "your-app",
      "count" : 2
}
</code></pre>

<h3 id="sdk-method">SDK Method</h3>

<pre><code>(ApigeeCollection*)getCollection:(NSString*)type
</code></pre>

<h3 id="properties">Properties</h3>

<p>Parameter   Description
  ———– —————————————————————-
  type        The entity type associated with the collection to be retrieved</p>

<p>This example uses the <a href="/app-services-sdks#android">Apache Usergrid Android
SDK</a>.</p>

<h3 id="example-requestresponse-2">Example Request/Response</h3>

<h4 id="request-2">Request:</h4>

<pre><code>//Create client entity
String ORGNAME = "your-org";
String APPNAME = "your-app";        
ApigeeClient apigeeClient = new ApigeeClient(ORGNAME,APPNAME);
DataClient dataClient = apigeeClient.getDataClient();

String type = "item"; //entity type to be retrieved
Map&lt;String,Object&gt; queryString =  null; //we don't need any additional query parameters, in this case
    
//call getCollectionAsync to initiate the asynchronous API call    
dataClient.getCollectionAsync(type, queryString, new ApiResponseCallback() {    

//If getEntitiesAsync fails, catch the error
    @Override
    public void onException(Exception e) { 
        // Error
    }
    
    //If getCollectionAsync is successful, handle the response object
    @Override
    public void onResponse(ApiResponse response) {
        try { 
            if (response != null) {
                // Success
            }
        } catch (Exception e) { //The API request returned an error
                // Fail
        }
    }
}); 
</code></pre>

<h4 id="response-2">Response:</h4>

<pre><code>    {"action":"get","application":"f34f4222-a166-11e2-a7f7-02e81adcf3d0","entities":[{"dataClient":{"accessToken":null,"apiUrl":"https://api.usergrid.com","applicationId":"your-app","clientId":null,"clientSecret":null,"currentOrganization":null,"loggedInUser":null,"organizationId":"your-org"},"type":"item","uuid":"5bb76bca-1657-11e3-903f-9ff6c621a7a4","price":"4.00","created":1378405020796,"name":"milk","modified":1378505935248,"availability":"in-stock","metadata":{"path":"/items/5bb76bca-1657-11e3-903f-9ff6c621a7a4"}},{"dataClient":{"accessToken":null,"apiUrl":"https://api.usergrid.com","applicationId":"your-app","clientId":null,"clientSecret":null,"currentOrganization":null,"loggedInUser":null,"organizationId":"your-org"},"type":"item","uuid":"1a9356ba-1682-11e3-a72a-81581bbaf055","price":"2.50","created":1378423379867,"name":"bread","modified":1378423379867,"metadata":{"path":"/items/1a9356ba-1682-11e3-a72a-81581bbaf055"}}],"params":{},"path":"/items","rawResponse":"{
      "action" : "get",
      "application" : "f34f4222-a166-11e2-a7f7-02e81adcf3d0",
      "params" : { },
      "path" : "/items",
      "uri" : "http://api.usergrid.com/your-org/your-app/items",
      "entities" : [ {
        "uuid" : "5bb76bca-1657-11e3-903f-9ff6c621a7a4",
        "type" : "item",
        "name" : "milk",
        "created" : 1378405020796,
        "modified" : 1378505935248,
        "availability" : "in-stock",
        "metadata" : {
          "path" : "/items/5bb76bca-1657-11e3-903f-9ff6c621a7a4"
        },
        "name" : "milk",
        "price" : "4.00"
      }, {
        "uuid" : "1a9356ba-1682-11e3-a72a-81581bbaf055",
        "type" : "item",
        "name" : "bread",
        "created" : 1378423379867,
        "modified" : 1378423379867,
        "metadata" : {
          "path" : "/items/1a9356ba-1682-11e3-a72a-81581bbaf055"
        },
        "name" : "bread",
        "price" : "2.50"
      } ],
      "timestamp" : 1378512710357,
      "duration" : 39,
      "organization" : "your-org",
      "applicationName" : "your-app"
    }
    ","uri":"http://api.usergrid.com/your-org/your-app/items","timestamp":1378512710357,"entityCount":2,"firstEntity":{"dataClient":{"accessToken":null,"apiUrl":"https://api.usergrid.com","applicationId":"your-app","clientId":null,"clientSecret":null,"currentOrganization":null,"loggedInUser":null,"organizationId":"your-org"},"type":"item","uuid":"5bb76bca-1657-11e3-903f-9ff6c621a7a4","price":"4.00","created":1378405020796,"name":"milk","modified":1378505935248,"availability":"in-stock","metadata":{"path":"/items/5bb76bca-1657-11e3-903f-9ff6c621a7a4"}},"lastEntity":{"dataClient":{"accessToken":null,"apiUrl":"https://api.usergrid.com","applicationId":"your-app","clientId":null,"clientSecret":null,"currentOrganization":null,"loggedInUser":null,"organizationId":"your-org"},"type":"item","uuid":"1a9356ba-1682-11e3-a72a-81581bbaf055","price":"2.50","created":1378423379867,"name":"bread","modified":1378423379867,"metadata":{"path":"/items/1a9356ba-1682-11e3-a72a-81581bbaf055"}},"organization":"your-org","duration":39,"applicationName":"your-app"}
</code></pre>

<h3 id="sdk-method-1">SDK Method</h3>

<p>Asynchronous:</p>

<pre><code>getCollectionAsync(String type, Map&lt;String,Object&gt; queryString, ApiResponseCallback callback)
</code></pre>

<p>Synchronous:</p>

<pre><code>ApiResponse getCollection(String type, Map&lt;String,Object&gt; queryString)
</code></pre>

<h3 id="properties-1">Properties</h3>

<p>Parameter     Description
  ————- ———————————————————————————-
  type          The entity type being retrieved
  queryString   Map object of entity properties to be matched for the collection to be retrieved
  callback      Callback function (Asynchronous calls only)</p>

<p>This example uses the <a href="/app-services-sdks#javascript">Apache Usergrid JavaScript (HTML5)
SDK</a>.</p>

<h3 id="example-requestresponse-3">Example Request/Response</h3>

<h4 id="request-3">Request:</h4>

<pre><code>var dataClient = new Usergrid.Client({
orgName:'your-org',
appName:'your-app'
});

var options = {
    type:"item", //Required - the type of collection to be retrieved
    client:dataClient //Required
};

//Create a collection object to hold the response
var collection = new Usergrid.Collection(options);

//Call request to initiate the API call
collection.fetch(
    function() {
        //success callback
    },
    function() {
        //error callback
    }
);
</code></pre>

<h4 id="response-3">Response:</h4>

<pre><code>Object {action: "get", application: "f34f4222-a166-11e2-a7f7-02e81adcf3d0", params: Object, path: "/items", uri: "http://api.usergrid.com/your-org/your-app/items"…}
    action: "get"
    application: "f34f4222-a166-11e2-a7f7-02e81adcf3d0"
    applicationName: "your-app"
    count: 2
    duration: 33
    entities: Array[2]
        0: Object
            created: 1378423379867
            metadata: Object
            modified: 1378423379867
            name: "bread"
            price: "2.50"
            type: "item"
            uuid: "1a9356ba-1682-11e3-a72a-81581bbaf055"
            __proto__: Object
        1: Object
            created: 1378405020796
            metadata: Object
            modified: 1378405020796
            name: "milk"
            price: "3.25"
            type: "item"
            uuid: "5bb76bca-1657-11e3-903f-9ff6c621a7a4"
            __proto__: Object
        length: 2
    __proto__: Array[0]
    organization: "your-org"
    params: Object
    path: "/items"
    timestamp: 1378427598013
    uri: "http://api.usergrid.com/your-org/your-app/items"
    __proto__: Object               
</code></pre>

<h3 id="sdk-method-2">SDK Method</h3>

<pre><code>Collection.fetch(callback);
</code></pre>

<h3 id="parameters-1">Parameters</h3>

<p>Parameter   Description
  ———– ———————————————-
  callback    Callback function to handle the API response</p>

<p>This example uses the <a href="/app-services-sdks#ruby">Apache Usergrid RubyGem</a>.</p>

<h3 id="example-requestresponse-4">Example Request/Response</h3>

<h4 id="request-4">Request:</h4>

<pre><code>    #Create a client object
    usergrid_api = 'https://api.usergrid.com'
    organization = 'your-org'
    application = 'your-app'
    
    dataClient = Usergrid::Application.new "//"
    
    begin
    # Retrieve the collection by referencing the [type]
    # and save the response
    response = dataClient['items'].entity
    
    rescue
    #fail
    end
</code></pre>

<h4 id="response-4">Response:</h4>

<pre><code>{
      "action" : "get",
      "application" : "f34f4222-a166-11e2-a7f7-02e81adcf3d0",
      "params" : { },
      "path" : "/items",
      "uri" : "http://api.usergrid.com/your-org/your-app/items",
      "entities" : [ {
            "uuid" : "5bb76bca-1657-11e3-903f-9ff6c621a7a4",
            "type" : "item",
            "name" : "milk",
            "created" : 1378405020796,
            "modified" : 1378405020796,
            "metadata" : {
                  "path" : "/items/5bb76bca-1657-11e3-903f-9ff6c621a7a4"
            },
            "name" : "milk",
            "price" : "3.25"
      }, {
        "uuid" : "1a9356ba-1682-11e3-a72a-81581bbaf055",
        "type" : "item",
        "name" : "bread",
        "created" : 1378423379867,
        "modified" : 1378423379867,
        "metadata" : {
              "path" : "/items/1a9356ba-1682-11e3-a72a-81581bbaf055"
        },
        "name" : "bread",
        "price" : "2.50"
      } ],
      "timestamp" : 1378426821261,
      "duration" : 35,
      "organization" : "your-org",
      "applicationName" : "your-app",
      "count" : 2
}
</code></pre>

<h3 id="sdk-method-3">SDK Method</h3>

<pre><code>Application.[&lt;entity_type&gt;].entity
</code></pre>

<h3 id="parameters-2">Parameters</h3>

<p>Parameter      Description
  ————– —————————————————————-
  entity_type   The entity type associated with the collection to be retrieved</p>

<p>This example uses the <a href="/app-services-sdks#nodejs">Apache Usergrid Node.js
module</a>.</p>

<h3 id="example-requestresponse-5">Example Request/Response</h3>

<h4 id="request-5">Request:</h4>

<pre><code>    var dataClient = new Usergrid.client({
        orgName:'your-org',
        appName:'your-app'
    });
    
    var options = {
        type:"item", //Required - the type of collection to be retrieved
        client:dataClient //Required
    };
    
    //Create a collection object to hold the response
    var collection = new Usergrid.collection(options);
    
    //Call request to initiate the API call
    collection.fetch(function (error, response) {
        if (error) {
            //error
        } else {
            //success      
        }
    });
</code></pre>

<h4 id="response-5">Response:</h4>

<pre><code>    { action: 'get',
      application: 'f34f4222-a166-11e2-a7f7-02e81adcf3d0',
      params: {},
      path: '/items',
      uri: 'http://api.usergrid.com/your-org/your-app/items',
      entities: 
       [ { uuid: '5bb76bca-1657-11e3-903f-9ff6c621a7a4',
           type: 'item',
           name: 'milk',
           created: 1378405020796,
           modified: 1378405020796,
           metadata: [Object],
           price: '3.25' },
         { uuid: '1a9356ba-1682-11e3-a72a-81581bbaf055',
           type: 'item',
           name: 'bread',
           created: 1378423379867,
           modified: 1378423379867,
           metadata: [Object],
           price: '2.50' } ],
      timestamp: 1378428161834,
      duration: 33,
      organization: 'your-org',
      applicationName: 'your-app' }             
</code></pre>

<h3 id="sdk-method-4">SDK Method</h3>

<pre><code>Collection.fetch(callback)
</code></pre>

<h3 id="parameters-3">Parameters</h3>

<p>Parameter   Description
  ———– ———————————————-
  callback    Callback function to handle the API response</p>

<p> </p>

    </div>
  </div>
</div><footer class="bs-footer" role="contentinfo">
      <div class="container">
        <p>
          Designed and built with all the love in the world by<a href="http://twitter.com/mdo" target="_blank"> @mdo</a>and
        </p>
        <p>
          Code licensed underdocumentation under
        </p>
        <p>
          Bootstrap中文文档版权归<a href="http://www.bootcss.com/">> Bootstrap中文网</a>及<a href="mailto:wangsai@bootcss.com">> 译者</a>所有。
          <p>
            <ul class="footer-links">
              <li>
                当前版本： v3.0.3
              </li>
              <li class="muted">
                &middot;
              </li>
              <li>
                <a href="http://v2.bootcss.com/"> Bootstrap 2.3.2 中文文档</a>
              </li>
              <li class="muted">
                &middot;
              </li>
              <li>
                <a href="http://www.bootcss.com"> Bootstrp中文网</a>
              </li>
              <li class="muted">
                &middot;
              </li>
              <li>
                <a href="http://blog.getbootstrap.com"> 官方博客</a>
              </li>
              <li class="muted">
                &middot;
              </li>
              <li>
                <a href="https://github.com/twbs/bootstrap/issues?state=open"> Issues</a>
              </li>
              <li class="muted">
                &middot;
              </li>
              <li>
                <a href="https://github.com/twbs/bootstrap/releases"> Releases</a>
              </li>
            </ul>
          </p>
        </p>
      </div>
    </footer>
    <script src="http://cdn.bootcss.com/jquery/1.10.2/jquery.min.js"></script>
    <script src="http://cdn.bootcss.com/twitter-bootstrap/3.0.3/js/bootstrap.min.js"></script>
    <script src="http://cdn.bootcss.com/holder/2.0/holder.min.js"></script>
    <script src="http://cdn.bootcss.com/highlight.js/7.3/highlight.min.js"></script>
    <script type="text/javascript">
      hljs.initHighlightingOnLoad();
    </script>
    <script src="/docs-assets/js/application.js"></script>
  </body>
</html>